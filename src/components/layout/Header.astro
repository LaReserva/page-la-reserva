---
// src/components/layout/Header.astro
import Navbar from './Navbar.astro';
import MobileMenu from './MobileMenu.astro';

const currentPath = Astro.url.pathname;
---

<header 
  id="main-header"
  class="fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-sm shadow-sm transition-all duration-300"
>
  <div class="container-custom">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center group">
        <img 
          src="/logo.svg" 
          alt="La Reserva" 
          class="h-12 w-auto transition-transform group-hover:scale-105" 
        />
      </a>
      
      <!-- Desktop Navigation -->
      <Navbar currentPath={currentPath} />
      
      <!-- CTA Button (Desktop) -->
      <a href="/cotizacion" class="hidden lg:block btn btn-primary">
        Cotizar Evento
      </a>
      
      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-btn"
        class="lg:hidden p-2 text-secondary-600 hover:text-primary-500 transition-colors"
        aria-label="Abrir menú"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Mobile Menu -->
  <MobileMenu currentPath={currentPath} />
</header>

<!-- Spacer para header fixed -->
<div class="h-20"></div> <!-- Ajusta el valor según la altura del header -->

<script>
  // Mobile menu toggle
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  
  btn?.addEventListener('click', () => {
    menu?.classList.toggle('hidden');
  });
  
  // Header scroll effect
  let lastScroll = 0;
  const header = document.getElementById('main-header');
  
  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 100) {
      header?.classList.add('shadow-md');
    } else {
      header?.classList.remove('shadow-md');
    }
    
    lastScroll = currentScroll;
  });
</script>