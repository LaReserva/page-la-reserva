---
// src/components/layout/MobileMenu.astro
import Button from '@/components/ui/Button.astro';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const navLinks = [
  { name: 'Inicio', href: '/' },
  { name: 'Servicios', href: '/servicios' },
  { name: 'Paquetes', href: '/paquetes' },
  { name: 'Portafolio', href: '/portafolio' },
  { name: 'Nosotros', href: '/nosotros' },
  { name: 'Blog', href: '/blog' },
  { name: 'Contacto', href: '/contacto' },
];

function isActive(path: string) {
  if (path === '/') return currentPath === '/';
  return currentPath.startsWith(path);
}
---

{/* CORRECCIONES APLICADAS:
  1. fixed top-20: Se ancla 80px abajo del topo (altura del header).
  2. left-0 w-full: Ocupa todo el ancho.
  3. h-[calc(100vh-5rem)]: Ocupa el resto de la altura exacta.
  4. bg-white: Fondo BLANCO SÓLIDO para tapar el contenido de atrás.
  5. z-40: Se asegura de estar encima del contenido pero debajo del header (z-50).
*/}
<div 
  id="mobile-menu"
  class="hidden lg:hidden fixed top-20 left-0 w-full h-[calc(100vh-5rem)] bg-white z-40 overflow-y-auto border-t border-secondary-100 shadow-xl"
>
  <nav class="container mx-auto px-4 py-8 flex flex-col min-h-full">
    
    {/* Lista de Enlaces */}
    <ul class="flex-1 space-y-2">
      {navLinks.map(link => (
        <li>
          <a 
            href={link.href}
            class={`
              block py-4 px-6 rounded-xl font-medium text-lg transition-all duration-200
              ${isActive(link.href)
                ? 'bg-primary-50 text-primary-700 font-semibold border-l-4 border-primary-500'
                : 'text-secondary-600 hover:bg-secondary-50 hover:text-secondary-900'
              }
            `}
          >
            {link.name}
          </a>
        </li>
      ))}
    </ul>
    
    {/* CTA Button en la parte inferior */}
    <div class="mt-8 pt-8 border-t border-secondary-100 pb-8">
      <p class="text-secondary-400 text-sm mb-4 text-center uppercase tracking-wider font-semibold">
        ¿Listo para celebrar?
      </p>
      <div class="px-4">
        <Button href="/cotizacion" variant="primary" fullWidth size="lg">
          Cotizar Evento
        </Button>
      </div>
    </div>

  </nav>
</div>