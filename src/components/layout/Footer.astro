---
// src/components/layout/Footer.astro
import { 
  Instagram, 
  Facebook, 
  Phone, 
  Mail, 
  MapPin, 
  Clock,
  Zap 
} from 'lucide-react';
// Importamos solo lo necesario de constants (para SITE_INFO que suele ser fijo, o links internos)
import { SITE_INFO } from '@/utils/constants';
// ✅ Importamos el fetcher dinámico
import { getGlobalSettings } from '@/lib/data';

const currentYear = new Date().getFullYear();

// ✅ Obtenemos configuración dinámica
const settings = await getGlobalSettings();

const quickLinks = [
  { name: 'Servicios', url: '/servicios' },
  { name: 'Paquetes', url: '/paquetes' },
  { name: 'Portafolio', url: '/portafolio' },
  { name: 'Blog', url: '/blog' },
  { name: 'Contacto', url: '/contacto' },
];

const legalLinks = [
  { name: 'Privacidad', url: '/privacidad' }, 
  { name: 'Términos', url: '/terminos' },
];
---

<footer class="relative z-50 bg-[#1A1A1A] text-white pt-16 pb-8 border-t border-secondary-800">
  <div class="container-custom">
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
      
      {/* Columna 1: Marca y Redes */}
      <div>
        <a href="/" class="block mb-6">
          <img src="/logo.svg" alt={SITE_INFO.name} class="h-12 w-auto brightness-0 invert" />
        </a>
        <p class="text-secondary-300 text-sm leading-relaxed mb-6">
          {SITE_INFO.description}
        </p>
        
        {/* Redes Sociales Dinámicas */}
        <div class="flex gap-4">
          
          {/* Instagram */}
          {settings.social_instagram && (
            <a 
              href={settings.social_instagram} 
              target="_blank" 
              rel="noopener noreferrer"
              class="p-2.5 bg-secondary-800 rounded-full hover:bg-primary-500 hover:text-secondary-900 transition-all duration-300 group"
              aria-label="Síguenos en Instagram"
            >
              <Instagram className="w-5 h-5 text-white group-hover:text-secondary-900" />
            </a>
          )}
          
          {/* Facebook */}
          {settings.social_facebook && (
            <a 
              href={settings.social_facebook} 
              target="_blank" 
              rel="noopener noreferrer"
              class="p-2.5 bg-secondary-800 rounded-full hover:bg-primary-500 hover:text-secondary-900 transition-all duration-300 group"
              aria-label="Síguenos en Facebook"
            >
              <Facebook className="w-5 h-5 text-white group-hover:text-secondary-900" />
            </a>
          )}

          {/* TikTok - Usamos el icono SVG manual o importado si tienes uno especifico */}
          {settings.social_tiktok && (
            <a 
              href={settings.social_tiktok} 
              target="_blank" 
              rel="noopener noreferrer"
              class="p-2.5 bg-secondary-800 rounded-full hover:bg-primary-500 hover:text-secondary-900 transition-all duration-300 group"
              aria-label="Síguenos en TikTok"
            >
               <svg 
                  viewBox="0 0 24 24" 
                  fill="none" 
                  stroke="currentColor" 
                  stroke-width="2" 
                  stroke-linecap="round" 
                  stroke-linejoin="round" 
                  class="w-5 h-5 text-white group-hover:text-secondary-900"
                >
                  <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"></path>
                </svg>
            </a>
          )}
        </div>
      </div>

      {/* Columna 2: Enlaces Rápidos */}
      <div>
        <h4 class="text-lg font-display font-bold mb-6 text-primary-500">Explorar</h4>
        <ul class="space-y-3">
          {quickLinks.map(link => (
            <li>
              <a 
                href={link.url} 
                class="text-secondary-300 hover:text-primary-400 transition-colors text-sm flex items-center gap-2 group"
              >
                <span class="w-1.5 h-1.5 bg-primary-500 rounded-full group-hover:scale-125 transition-transform"></span>
                {link.name}
              </a>
            </li>
          ))}
        </ul>
      </div>

      {/* Columna 3: Contacto Dinámico */}
      <div>
        <h4 class="text-lg font-display font-bold mb-6 text-primary-500">Contacto</h4>
        <ul class="space-y-4">
          <li>
            <a href={`tel:${settings.contact_phone.replace(/\D/g, '')}`} class="flex items-start gap-3 group">
              <Phone className="w-5 h-5 text-primary-500 mt-0.5 group-hover:text-primary-400 flex-shrink-0" />
              <div>
                <span class="block text-xs text-secondary-400 uppercase tracking-wider">Llámanos</span>
                <span class="text-secondary-200 group-hover:text-white transition-colors">{settings.contact_phone}</span>
              </div>
            </a>
          </li>
          <li>
            <a href={`mailto:${settings.contact_email}`} class="flex items-start gap-3 group">
              <Mail className="w-5 h-5 text-primary-500 mt-0.5 group-hover:text-primary-400 flex-shrink-0" />
              <div>
                <span class="block text-xs text-secondary-400 uppercase tracking-wider">Escríbenos</span>
                <span class="text-secondary-200 group-hover:text-white transition-colors break-words">{settings.contact_email}</span>
              </div>
            </a>
          </li>
          <li class="flex items-start gap-3">
            <MapPin className="w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0" />
            <div>
              <span class="block text-xs text-secondary-400 uppercase tracking-wider">Ubicación</span>
              <span class="text-secondary-200">{settings.address}</span>
            </div>
          </li>
        </ul>
      </div>

      {/* Columna 4: Horarios Dinámicos */}
      <div>
        <h4 class="text-lg font-display font-bold mb-6 text-primary-500">Horarios</h4>
        <div class="flex items-start gap-3 mb-4">
          <Clock className="w-5 h-5 text-primary-500 mt-0.5 flex-shrink-0" />
          <ul class="space-y-2 text-sm text-secondary-300">
            <li>Lunes - Viernes: {settings.hours_weekdays}</li>
            <li>sabados: {settings.hours_saturday}</li>
            <li class="text-secondary-500">Domingo: {settings.hours_sunday}</li>
          </ul>
        </div>
        
        <div class="mt-6 p-4 bg-secondary-800/50 rounded-lg border border-secondary-700 flex items-center justify-center gap-2">
          <Zap className="w-4 h-4 text-primary-500" />
          <p class="text-xs text-secondary-400 uppercase tracking-wide font-semibold">
            {settings.response_time}
          </p>
        </div>
      </div>

    </div>

    {/* Barra Inferior */}
    <div class="border-t border-secondary-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
      <p class="text-secondary-400 text-sm text-center md:text-left">
        © {currentYear} {SITE_INFO.name}. Todos los derechos reservados.
      </p>
      <div class="flex gap-6 text-sm text-secondary-400">
        {legalLinks.map(link => (
          <a href={link.url} class="hover:text-primary-500 transition-colors">
            {link.name}
          </a>
        ))}
      </div>
    </div>

  </div>
</footer>